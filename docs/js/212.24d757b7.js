"use strict";(self["webpackChunkvue_beginner"]=self["webpackChunkvue_beginner"]||[]).push([[212],{212:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});var l=a(641),n=a(33),u=a(953);const v={class:"snake-game"},o=["width","height"],i={key:0,class:"game-over"},r=400,c=20;var s={__name:"Snake",setup(e){const t=r/c,a=r/c,s=(0,u.KR)(null),h=(0,u.KR)([{x:5,y:5}]),d=(0,u.KR)("right"),f=(0,u.KR)({x:10,y:10}),w=(0,u.KR)(!1),y=(0,u.KR)(0);let g=null;const x=(0,u.KR)(r),k=(0,u.KR)(r),p=(0,l.EW)((()=>({width:"100%",height:"auto",maxWidth:"100vw",maxHeight:"100vw",display:"block",touchAction:"none"})));function m(){const e=Math.min(window.innerWidth,400);x.value=e,k.value=e}function E(){const e=s.value.getContext("2d");e.clearRect(0,0,x.value,k.value);const l=x.value/t,n=k.value/a;e.fillStyle="green",h.value.forEach((t=>{e.fillRect(t.x*l,t.y*n,l,n)})),e.fillStyle="red",e.fillRect(f.value.x*l,f.value.y*n,l,n)}function R(){if(w.value)return;const e={...h.value[0]};if("right"===d.value?e.x++:"left"===d.value?e.x--:"up"===d.value?e.y--:"down"===d.value&&e.y++,e.x<0||e.x>=t||e.y<0||e.y>=a||h.value.some((t=>t.x===e.x&&t.y===e.y)))return w.value=!0,void clearInterval(g);h.value.unshift(e),e.x===f.value.x&&e.y===f.value.y?(y.value++,L()):h.value.pop(),E()}function L(){let e;do{e={x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*a)}}while(h.value.some((t=>t.x===e.x&&t.y===e.y)));f.value=e}function b(e){"ArrowUp"===e.key&&"down"!==d.value?d.value="up":"ArrowDown"===e.key&&"up"!==d.value?d.value="down":"ArrowLeft"===e.key&&"right"!==d.value?d.value="left":"ArrowRight"===e.key&&"left"!==d.value&&(d.value="right")}let K=0,_=0;function M(e){1===e.touches.length&&(K=e.touches[0].clientX,_=e.touches[0].clientY)}function A(e){if(1===e.changedTouches.length){const t=e.changedTouches[0].clientX-K,a=e.changedTouches[0].clientY-_;Math.abs(t)>Math.abs(a)?t>20&&"left"!==d.value?d.value="right":t<-20&&"right"!==d.value&&(d.value="left"):a>20&&"up"!==d.value?d.value="down":a<-20&&"down"!==d.value&&(d.value="up")}}function C(){h.value=[{x:5,y:5}],d.value="right",y.value=0,w.value=!1,L(),E(),g=setInterval(R,120)}return(0,l.sV)((()=>{m(),E(),window.addEventListener("resize",m),window.addEventListener("keydown",b),s.value.addEventListener("touchstart",M,{passive:!1}),s.value.addEventListener("touchend",A,{passive:!1}),g=setInterval(R,120)})),(0,l.hi)((()=>{window.removeEventListener("resize",m),window.removeEventListener("keydown",b),s.value&&(s.value.removeEventListener("touchstart",M),s.value.removeEventListener("touchend",A)),clearInterval(g)})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("canvas",{ref_key:"canvas",ref:s,width:x.value,height:k.value,style:(0,n.Tr)(p.value)},null,12,o),w.value?((0,l.uX)(),(0,l.CE)("div",i,[(0,l.eW)(" 游戏结束！分数："+(0,n.v_)(y.value)+" ",1),(0,l.Lk)("button",{onClick:C},"重新开始")])):(0,l.Q3)("",!0)]))}},h=a(6262);const d=(0,h.A)(s,[["__scopeId","data-v-5e19871b"]]);var f=d}}]);
//# sourceMappingURL=212.24d757b7.js.map