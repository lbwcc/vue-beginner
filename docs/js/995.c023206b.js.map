{"version":3,"file":"js/995.c023206b.js","mappings":"4MACA,MAAMA,EAAOC,EAAA,EACb,QCAO,MAAMC,EAAkBC,IAC3B,MAAMC,GAAS,EACTC,EAAMD,EACN,oCACA,aACN,OAAO,EAAKE,IAAID,EAAK,CACjBE,OAAQ,CACJC,QAAS,QAAQL,IACjBM,OAAQ,OACRC,MAAO,SAEd,E,0KCRL,MAAMC,GAAO,QAAI,IACXC,GAAY,QAAI,IAChBC,GAAa,QAAI,IAEvBC,eAAeC,IACb,MAAMC,QAAYd,EAAeS,EAAKM,OAChCC,EAAOF,EAAIE,KACXC,EAAM,QAAQR,EAAKM,QACzB,GAAIC,GAAQA,EAAKC,GAAM,CACrB,MAAMC,EAAOF,EAAKC,GAClB,KAAUE,QAAQ,SAClBT,EAAUK,MAAQ,CAChB,CACEK,SAAUF,EAAKG,MAAQH,EAAKG,MAAMC,QAAUJ,EAAKG,MAAME,OAASL,EAAKG,MAAMG,MAAQ,GACnFC,SAAUP,EAAKQ,OAAS,GACxBC,OAAQT,EAAKU,SAAWV,EAAKU,QAAQC,OAASX,EAAKU,QAAQE,KAAIC,GAAKA,EAAEC,OAAMC,KAAK,MAAQ,GACzFxB,KAAMA,EAAKM,OAGjB,MACEL,EAAUK,MAAQ,GAClB,KAAUmB,QAAQ,YAEtB,C,m+BCtBA,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://vue-beginner/./src/utils/http.js","webpack://vue-beginner/./src/api/booksApi.js","webpack://vue-beginner/./src/views/BooksFinder.vue","webpack://vue-beginner/./src/views/BooksFinder.vue?133c"],"sourcesContent":["import axios from \"axios\"\r\nconst http = axios\r\nexport default http","import http from '@/utils/http.js'\r\n// const appKey= 'ae1718d4587744b0b79f940fbef69e77'\r\nexport const getBooksByISBN = (search) => {\r\n    const isProd = process.env.NODE_ENV === 'production';\r\n    const url = isProd\r\n        ? 'https://openlibrary.org/api/books'\r\n        : '/findBooks';\r\n    return http.get(url, {\r\n        params: {\r\n            bibkeys: `ISBN:${search}`,\r\n            format: 'json',\r\n            jscmd: 'data'\r\n        }\r\n    })\r\n}","<script setup>\r\nimport { ref } from 'vue'\r\nimport { getBooksByISBN } from \"@/api/booksApi\"\r\nimport { ElMessage } from 'element-plus'\r\n\r\nconst isbn = ref(\"\")\r\nconst booksInfo = ref([])\r\nconst searchType = ref(\"\")\r\n\r\nasync function findBooks() {\r\n  const res = await getBooksByISBN(isbn.value)\r\n  const data = res.data\r\n  const key = `ISBN:${isbn.value}`\r\n  if (data && data[key]) {\r\n    const book = data[key]\r\n    ElMessage.success(\"请求成功！\")\r\n    booksInfo.value = [\r\n      {\r\n        pictures: book.cover ? book.cover.medium || book.cover.large || book.cover.small : '',\r\n        bookName: book.title || '',\r\n        author: book.authors && book.authors.length ? book.authors.map(a => a.name).join(', ') : '',\r\n        isbn: isbn.value\r\n      }\r\n    ]\r\n  } else {\r\n    booksInfo.value = []\r\n    ElMessage.warning(\"未找到相关图书信息\")\r\n  }\r\n}\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <H1>图书查询</H1>\r\n    <el-input\r\n      id=\"input\"\r\n      placeholder=\"请输入内容\"\r\n      v-model=\"isbn\"\r\n      class=\"input-with-select\"\r\n    >\r\n      <template #prepend>\r\n        <el-select v-model=\"searchType\" placeholder=\"ISBN\">\r\n          <!-- <el-option label=\"作者名\" value=\"AN\"></el-option>\r\n          <el-option label=\"书籍名\" value=\"BN\"></el-option> -->\r\n        </el-select>\r\n      </template>\r\n      <template #append>\r\n        <el-button\r\n          @click=\"findBooks\"\r\n          icon=\"el-icon-search\"\r\n        ></el-button>\r\n      </template>\r\n    </el-input>\r\n    <div id=\"list\" v-if=\"booksInfo.length\">\r\n      <div v-for=\"item in booksInfo\" :key=\"item.isbn\">\r\n          <img :src=\"item.pictures\" class=\"image\" />\r\n          <div style=\"padding: 14px\">\r\n            <span>{{ item.bookName }}</span>\r\n            <div class=\"bottom clearfix\">\r\n              <time class=\"author\">{{ item.author }}</time>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n    <div v-else> 暂无数据 </div>\r\n  </div>\r\n</template>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-input-group {\r\n  width: 100%;\r\n  max-width: 500px;\r\n}\r\n.el-select {\r\n  width: 100px;\r\n}\r\n#list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 16px;\r\n}\r\n#list > div {\r\n  width: 100%;\r\n  max-width: 500px;\r\n  box-sizing: border-box;\r\n  margin-bottom: 16px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\r\n  display: flex;\r\n  align-items: flex-start;\r\n}\r\n.image {\r\n  width: 100px;\r\n  height: auto;\r\n  max-width: 30vw;\r\n  object-fit: contain;\r\n  border-radius: 4px;\r\n  margin: 8px;\r\n}\r\n@media (max-width: 600px) {\r\n  .el-input-group {\r\n    width: 100%;\r\n    max-width: 100vw;\r\n  }\r\n  #list > div {\r\n    max-width: 100vw;\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n  .image {\r\n    max-width: 80vw;\r\n    width: 80vw;\r\n  }\r\n}\r\n</style>","import script from \"./BooksFinder.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./BooksFinder.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./BooksFinder.vue?vue&type=style&index=0&id=e2fa7946&lang=less&scoped=true\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-e2fa7946\"]])\n\nexport default __exports__"],"names":["http","axios","getBooksByISBN","search","isProd","url","get","params","bibkeys","format","jscmd","isbn","booksInfo","searchType","async","findBooks","res","value","data","key","book","success","pictures","cover","medium","large","small","bookName","title","author","authors","length","map","a","name","join","warning","__exports__"],"sourceRoot":""}