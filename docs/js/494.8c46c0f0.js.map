{"version":3,"file":"js/494.8c46c0f0.js","mappings":"oKAAA,IAAIA,EAAS,WAAkB,IAAIC,EAAIC,KAAKC,EAAGF,EAAIG,MAAMD,GAAG,OAAOA,EAAG,MAAM,CAACA,EAAG,KAAK,CAACF,EAAII,GAAG,UAAUF,EAAG,WAAW,CAACG,YAAY,oBAAoBC,MAAM,CAAC,GAAK,QAAQ,YAAc,SAASC,MAAM,CAACC,MAAOR,EAAQ,KAAES,SAAS,SAAUC,GAAMV,EAAIW,KAAKD,CAAG,EAAEE,WAAW,SAAS,CAACV,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,UAAU,YAAc,QAAQO,KAAK,UAAUN,MAAM,CAACC,MAAOR,EAAc,WAAES,SAAS,SAAUC,GAAMV,EAAIc,WAAWJ,CAAG,EAAEE,WAAW,gBAAgBV,EAAG,YAAY,CAACI,MAAM,CAAC,KAAO,SAAS,KAAO,kBAAkBS,GAAG,CAAC,MAAQf,EAAIgB,WAAWH,KAAK,YAAY,GAAIb,EAAIiB,UAAgB,OAAEf,EAAG,MAAM,CAACI,MAAM,CAAC,GAAK,SAASN,EAAIkB,GAAIjB,KAAc,WAAE,SAASkB,GAAM,OAAOjB,EAAG,MAAM,CAACkB,IAAID,EAAKR,MAAM,CAACT,EAAG,MAAM,CAACG,YAAY,QAAQC,MAAM,CAAC,IAAMa,EAAKE,YAAYnB,EAAG,MAAM,CAACoB,YAAY,CAAC,QAAU,SAAS,CAACpB,EAAG,OAAO,CAACF,EAAII,GAAGJ,EAAIuB,GAAGJ,EAAKK,aAAatB,EAAG,MAAM,CAACG,YAAY,mBAAmB,CAACH,EAAG,OAAO,CAACG,YAAY,UAAU,CAACL,EAAII,GAAGJ,EAAIuB,GAAGJ,EAAKM,gBAAgB,IAAG,GAAGvB,EAAG,MAAM,CAACF,EAAII,GAAG,aAAa,EAC19B,EACIsB,EAAkB,G,UCDtB,MAAMC,EAAOC,EAAA,EACb,QCAO,MAAMC,EAAkBC,IAC3B,MAAMC,GAAS,EACTC,EAAMD,EACN,oCACA,aACN,OAAO,EAAKE,IAAID,EAAK,CACjBE,OAAQ,CACJC,QAAS,QAAQL,IACjBM,OAAQ,OACRC,MAAO,SAEd,ECwBL,OACE,IAAAC,GACE,MAAO,CACL3B,KAAM,GACNM,UAAW,GACXH,WAAY,GAEhB,EACAyB,QAAS,CACP,eAAMvB,GACJ,MAAMwB,QAAYX,EAAe5B,KAAKU,MAChC2B,EAAOE,EAAIF,KAEXlB,EAAM,QAAQnB,KAAKU,OACzB,GAAI2B,GAAQA,EAAKlB,GAAM,CACrB,MAAMqB,EAAOH,EAAKlB,GAClBnB,KAAKyC,SAASC,QAAQ,SACtB1C,KAAKgB,UAAY,CACf,CACEI,SAAUoB,EAAKG,MAAQH,EAAKG,MAAMC,QAAUJ,EAAKG,MAAME,OAASL,EAAKG,MAAMG,MAAQ,GACnFvB,SAAUiB,EAAKO,OAAS,GACxBvB,OAAQgB,EAAKQ,SAAWR,EAAKQ,QAAQC,OAAST,EAAKQ,QAAQE,KAAIC,GAAKA,EAAEC,OAAMC,KAAK,MAAQ,GACzF3C,KAAMV,KAAKU,MAGjB,MACEV,KAAKgB,UAAY,GACjBhB,KAAKyC,SAASa,QAAQ,YAE1B,IClEmI,I,UCQnIC,GAAY,OACd,EACAzD,EACA2B,GACA,EACA,KACA,WACA,MAIF,EAAe8B,EAAiB,O","sources":["webpack://vue-beginner/./src/views/BooksFinder.vue?964e","webpack://vue-beginner/./src/utils/http.js","webpack://vue-beginner/./src/api/booksApi.js","webpack://vue-beginner/src/views/BooksFinder.vue","webpack://vue-beginner/./src/views/BooksFinder.vue?003e","webpack://vue-beginner/./src/views/BooksFinder.vue"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',[_c('H1',[_vm._v(\"图书查询\")]),_c('el-input',{staticClass:\"input-with-select\",attrs:{\"id\":\"input\",\"placeholder\":\"请输入内容\"},model:{value:(_vm.isbn),callback:function ($$v) {_vm.isbn=$$v},expression:\"isbn\"}},[_c('el-select',{attrs:{\"slot\":\"prepend\",\"placeholder\":\"ISBN\"},slot:\"prepend\",model:{value:(_vm.searchType),callback:function ($$v) {_vm.searchType=$$v},expression:\"searchType\"}}),_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.findBooks},slot:\"append\"})],1),(_vm.booksInfo.length)?_c('div',{attrs:{\"id\":\"list\"}},_vm._l((this.booksInfo),function(item){return _c('div',{key:item.isbn},[_c('img',{staticClass:\"image\",attrs:{\"src\":item.pictures}}),_c('div',{staticStyle:{\"padding\":\"14px\"}},[_c('span',[_vm._v(_vm._s(item.bookName))]),_c('div',{staticClass:\"bottom clearfix\"},[_c('time',{staticClass:\"author\"},[_vm._v(_vm._s(item.author))])])])])}),0):_c('div',[_vm._v(\" 暂无数据 \")])],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import axios from \"axios\"\r\nconst http = axios\r\nexport default http","import http from '@/utils/http.js'\r\n// const appKey= 'ae1718d4587744b0b79f940fbef69e77'\r\nexport const getBooksByISBN = (search) => {\r\n    const isProd = process.env.NODE_ENV === 'production';\r\n    const url = isProd\r\n        ? 'https://openlibrary.org/api/books'\r\n        : '/findBooks';\r\n    return http.get(url, {\r\n        params: {\r\n            bibkeys: `ISBN:${search}`,\r\n            format: 'json',\r\n            jscmd: 'data'\r\n        }\r\n    })\r\n}","<template>\r\n  <div>\r\n    <H1>图书查询</H1>\r\n    <el-input\r\n      id=\"input\"\r\n      placeholder=\"请输入内容\"\r\n      v-model=\"isbn\"\r\n      class=\"input-with-select\"\r\n    >\r\n      <el-select v-model=\"searchType\" slot=\"prepend\" placeholder=\"ISBN\">\r\n        <!-- <el-option label=\"作者名\" value=\"AN\"></el-option>\r\n        <el-option label=\"书籍名\" value=\"BN\"></el-option> -->\r\n      </el-select>\r\n      <el-button\r\n        @click=\"findBooks\"\r\n        slot=\"append\"\r\n        icon=\"el-icon-search\"\r\n      ></el-button>\r\n    </el-input>\r\n    <div id=\"list\" v-if=\"booksInfo.length\">\r\n      <div v-for=\"item in this.booksInfo\" :key=\"item.isbn\">\r\n          <img :src=\"item.pictures\" class=\"image\" />\r\n          <div style=\"padding: 14px\">\r\n            <span>{{ item.bookName }}</span>\r\n            <div class=\"bottom clearfix\">\r\n              <time class=\"author\">{{ item.author }}</time>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    </div>\r\n    <div v-else> 暂无数据 </div>\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport { getBooksByISBN } from \"@/api/booksApi\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      isbn: \"\",\r\n      booksInfo: [],\r\n      searchType: \"\",\r\n    };\r\n  },\r\n  methods: {\r\n    async findBooks() {\r\n      const res = await getBooksByISBN(this.isbn);\r\n      const data = res.data;\r\n      // Open Library 返回的 key 形如 ISBN:xxxx\r\n      const key = `ISBN:${this.isbn}`;\r\n      if (data && data[key]) {\r\n        const book = data[key];\r\n        this.$message.success(\"请求成功！\");\r\n        this.booksInfo = [\r\n          {\r\n            pictures: book.cover ? book.cover.medium || book.cover.large || book.cover.small : '',\r\n            bookName: book.title || '',\r\n            author: book.authors && book.authors.length ? book.authors.map(a => a.name).join(', ') : '',\r\n            isbn: this.isbn\r\n          }\r\n        ];\r\n      } else {\r\n        this.booksInfo = [];\r\n        this.$message.warning(\"未找到相关图书信息\");\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.el-input-group {\r\n  width: 100%;\r\n  max-width: 500px;\r\n}\r\n.el-select {\r\n  width: 100px;\r\n}\r\n#list {\r\n  display: flex;\r\n  flex-wrap: wrap;\r\n  gap: 16px;\r\n}\r\n#list > div {\r\n  width: 100%;\r\n  max-width: 500px;\r\n  box-sizing: border-box;\r\n  margin-bottom: 16px;\r\n  background: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.05);\r\n  display: flex;\r\n  align-items: flex-start;\r\n}\r\n.image {\r\n  width: 100px;\r\n  height: auto;\r\n  max-width: 30vw;\r\n  object-fit: contain;\r\n  border-radius: 4px;\r\n  margin: 8px;\r\n}\r\n@media (max-width: 600px) {\r\n  .el-input-group {\r\n    width: 100%;\r\n    max-width: 100vw;\r\n  }\r\n  #list > div {\r\n    max-width: 100vw;\r\n    flex-direction: column;\r\n    align-items: center;\r\n  }\r\n  .image {\r\n    max-width: 80vw;\r\n    width: 80vw;\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BooksFinder.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./BooksFinder.vue?vue&type=script&lang=js\"","import { render, staticRenderFns } from \"./BooksFinder.vue?vue&type=template&id=6a41ae1c&scoped=true\"\nimport script from \"./BooksFinder.vue?vue&type=script&lang=js\"\nexport * from \"./BooksFinder.vue?vue&type=script&lang=js\"\nimport style0 from \"./BooksFinder.vue?vue&type=style&index=0&id=6a41ae1c&prod&lang=less&scoped=true\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"6a41ae1c\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","_v","staticClass","attrs","model","value","callback","$$v","isbn","expression","slot","searchType","on","findBooks","booksInfo","_l","item","key","pictures","staticStyle","_s","bookName","author","staticRenderFns","http","axios","getBooksByISBN","search","isProd","url","get","params","bibkeys","format","jscmd","data","methods","res","book","$message","success","cover","medium","large","small","title","authors","length","map","a","name","join","warning","component"],"sourceRoot":""}