{"version":3,"file":"js/212.24d757b7.js","mappings":"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","sources":["webpack://vue-beginner/./src/views/Snake.vue","webpack://vue-beginner/./src/views/Snake.vue?551f"],"sourcesContent":["<template>\r\n  <div class=\"snake-game\">\r\n    <canvas ref=\"canvas\" :width=\"canvasWidth\" :height=\"canvasHeight\" :style=\"canvasStyle\" />\r\n    <div v-if=\"gameOver\" class=\"game-over\">\r\n      游戏结束！分数：{{ score }}\r\n      <button @click=\"restart\">重新开始</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted, computed } from 'vue';\r\n\r\n// 响应式 canvas 尺寸\r\nconst baseSize = 400;\r\nconst cellSize = 20;\r\nconst cols = baseSize / cellSize;\r\nconst rows = baseSize / cellSize;\r\n\r\nconst canvas = ref(null);\r\nconst snake = ref([\r\n  { x: 5, y: 5 },\r\n]);\r\nconst direction = ref('right');\r\nconst food = ref({ x: 10, y: 10 });\r\nconst gameOver = ref(false);\r\nconst score = ref(0);\r\nlet timer = null;\r\n\r\n// 适配移动端，canvas 宽高自适应\r\nconst canvasWidth = ref(baseSize);\r\nconst canvasHeight = ref(baseSize);\r\nconst canvasStyle = computed(() => ({\r\n  width: '100%',\r\n  height: 'auto',\r\n  maxWidth: '100vw',\r\n  maxHeight: '100vw',\r\n  display: 'block',\r\n  touchAction: 'none',\r\n}));\r\n\r\nfunction updateCanvasSize() {\r\n  // 以屏幕宽度为准，最大 400px\r\n  const size = Math.min(window.innerWidth, 400);\r\n  canvasWidth.value = size;\r\n  canvasHeight.value = size;\r\n}\r\n\r\nfunction draw() {\r\n  const ctx = canvas.value.getContext('2d');\r\n  ctx.clearRect(0, 0, canvasWidth.value, canvasHeight.value);\r\n  const scaleX = canvasWidth.value / cols;\r\n  const scaleY = canvasHeight.value / rows;\r\n  // 画蛇\r\n  ctx.fillStyle = 'green';\r\n  snake.value.forEach(seg => {\r\n    ctx.fillRect(seg.x * scaleX, seg.y * scaleY, scaleX, scaleY);\r\n  });\r\n  // 画食物\r\n  ctx.fillStyle = 'red';\r\n  ctx.fillRect(food.value.x * scaleX, food.value.y * scaleY, scaleX, scaleY);\r\n}\r\n\r\nfunction move() {\r\n  if (gameOver.value) return;\r\n  const head = { ...snake.value[0] };\r\n  if (direction.value === 'right') head.x++;\r\n  else if (direction.value === 'left') head.x--;\r\n  else if (direction.value === 'up') head.y--;\r\n  else if (direction.value === 'down') head.y++;\r\n\r\n  // 撞墙或撞自己\r\n  if (\r\n    head.x < 0 || head.x >= cols ||\r\n    head.y < 0 || head.y >= rows ||\r\n    snake.value.some(seg => seg.x === head.x && seg.y === head.y)\r\n  ) {\r\n    gameOver.value = true;\r\n    clearInterval(timer);\r\n    return;\r\n  }\r\n\r\n  snake.value.unshift(head);\r\n  // 吃到食物\r\n  if (head.x === food.value.x && head.y === food.value.y) {\r\n    score.value++;\r\n    placeFood();\r\n  } else {\r\n    snake.value.pop();\r\n  }\r\n  draw();\r\n}\r\n\r\nfunction placeFood() {\r\n  let newFood;\r\n  do {\r\n    newFood = {\r\n      x: Math.floor(Math.random() * cols),\r\n      y: Math.floor(Math.random() * rows),\r\n    };\r\n  } while (snake.value.some(seg => seg.x === newFood.x && seg.y === newFood.y));\r\n  food.value = newFood;\r\n}\r\n\r\nfunction keydown(e) {\r\n  if (e.key === 'ArrowUp' && direction.value !== 'down') direction.value = 'up';\r\n  else if (e.key === 'ArrowDown' && direction.value !== 'up') direction.value = 'down';\r\n  else if (e.key === 'ArrowLeft' && direction.value !== 'right') direction.value = 'left';\r\n  else if (e.key === 'ArrowRight' && direction.value !== 'left') direction.value = 'right';\r\n}\r\n\r\n// 触摸滑动支持\r\nlet touchStartX = 0;\r\nlet touchStartY = 0;\r\nfunction handleTouchStart(e) {\r\n  if (e.touches.length === 1) {\r\n    touchStartX = e.touches[0].clientX;\r\n    touchStartY = e.touches[0].clientY;\r\n  }\r\n}\r\nfunction handleTouchEnd(e) {\r\n  if (e.changedTouches.length === 1) {\r\n    const dx = e.changedTouches[0].clientX - touchStartX;\r\n    const dy = e.changedTouches[0].clientY - touchStartY;\r\n    if (Math.abs(dx) > Math.abs(dy)) {\r\n      if (dx > 20 && direction.value !== 'left') direction.value = 'right';\r\n      else if (dx < -20 && direction.value !== 'right') direction.value = 'left';\r\n    } else {\r\n      if (dy > 20 && direction.value !== 'up') direction.value = 'down';\r\n      else if (dy < -20 && direction.value !== 'down') direction.value = 'up';\r\n    }\r\n  }\r\n}\r\n\r\nfunction restart() {\r\n  snake.value = [{ x: 5, y: 5 }];\r\n  direction.value = 'right';\r\n  score.value = 0;\r\n  gameOver.value = false;\r\n  placeFood();\r\n  draw();\r\n  timer = setInterval(move, 120);\r\n}\r\n\r\nonMounted(() => {\r\n  updateCanvasSize();\r\n  draw();\r\n  window.addEventListener('resize', updateCanvasSize);\r\n  window.addEventListener('keydown', keydown);\r\n  // 触摸事件\r\n  canvas.value.addEventListener('touchstart', handleTouchStart, { passive: false });\r\n  canvas.value.addEventListener('touchend', handleTouchEnd, { passive: false });\r\n  timer = setInterval(move, 120);\r\n});\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', updateCanvasSize);\r\n  window.removeEventListener('keydown', keydown);\r\n  if (canvas.value) {\r\n    canvas.value.removeEventListener('touchstart', handleTouchStart);\r\n    canvas.value.removeEventListener('touchend', handleTouchEnd);\r\n  }\r\n  clearInterval(timer);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.snake-game {\r\n  position: relative;\r\n  width: 100vw;\r\n  max-width: 400px;\r\n  margin: 0 auto;\r\n  padding-top: 10vw;\r\n  box-sizing: border-box;\r\n}\r\ncanvas {\r\n  border: 1px solid #333;\r\n  background: #fafafa;\r\n  width: 100%;\r\n  height: auto;\r\n  display: block;\r\n  touch-action: none;\r\n}\r\n.game-over {\r\n  position: absolute;\r\n  top: 40%;\r\n  left: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n  background: rgba(255,255,255,0.8);\r\n  font-size: 1.2rem;\r\n  padding: 1.2rem 0;\r\n}\r\nbutton {\r\n  font-size: 1rem;\r\n  padding: 0.6rem 1.2rem;\r\n  margin-top: 1rem;\r\n  border-radius: 0.5rem;\r\n  border: none;\r\n  background: #4caf50;\r\n  color: #fff;\r\n  box-shadow: 0 2px 6px rgba(0,0,0,0.1);\r\n}\r\n</style>\r\n","import script from \"./Snake.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Snake.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Snake.vue?vue&type=style&index=0&id=5e19871b&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-5e19871b\"]])\n\nexport default __exports__"],"names":["baseSize","cellSize","cols","rows","canvas","snake","x","y","direction","food","gameOver","score","timer","canvasWidth","canvasHeight","canvasStyle","width","height","maxWidth","maxHeight","display","touchAction","updateCanvasSize","size","Math","min","window","innerWidth","value","draw","ctx","getContext","clearRect","scaleX","scaleY","fillStyle","forEach","seg","fillRect","move","head","some","clearInterval","unshift","placeFood","pop","newFood","floor","random","keydown","e","key","touchStartX","touchStartY","handleTouchStart","touches","length","clientX","clientY","handleTouchEnd","changedTouches","dx","dy","abs","restart","setInterval","addEventListener","passive","removeEventListener","__exports__"],"sourceRoot":""}