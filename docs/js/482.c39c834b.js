"use strict";(self["webpackChunkvue_beginner"]=self["webpackChunkvue_beginner"]||[]).push([[482],{5482:function(e,t,a){a.r(t),a.d(t,{default:function(){return y}});var l=a(641),n=a(33),u=a(953);const v={class:"snake-game"},o=["width","height"],r={key:0,class:"game-over"},i=20,c=200,s=400;var h={__name:"Snake",setup(e){const t=400/i,a=400/i,h=(0,u.KR)(s),d=(0,u.KR)(s),f=(0,u.KR)(null),y=(0,u.KR)([{x:5,y:5}]),w=(0,u.KR)("right"),g=[{score:1,color:"red"},{score:3,color:"gold"},{score:5,color:"blue"}],x=(0,u.KR)({x:10,y:10,type:g[0]}),p=(0,u.KR)(!1),k=(0,u.KR)(0);let m=null;function M(){return Math.max(40,120-10*Math.floor(k.value/10))}function R(){const e=Math.max(c,Math.min(window.innerWidth,s));h.value=e,d.value=e}function E(){const e=f.value.getContext("2d");e.clearRect(0,0,h.value,d.value);const l=h.value/t,n=d.value/a;e.fillStyle="green",y.value.forEach((t=>{e.fillRect(t.x*l,t.y*n,l,n)})),e.fillStyle=x.value.type.color,e.fillRect(x.value.x*l,x.value.y*n,l,n)}function L(){if(p.value)return;const e={...y.value[0]};if("right"===w.value?e.x++:"left"===w.value?e.x--:"up"===w.value?e.y--:"down"===w.value&&e.y++,e.x<0&&(e.x=t-1),e.x>=t&&(e.x=0),e.y<0&&(e.y=a-1),e.y>=a&&(e.y=0),y.value.some((t=>t.x===e.x&&t.y===e.y)))return p.value=!0,void clearInterval(m);y.value.unshift(e),e.x===x.value.x&&e.y===x.value.y?(k.value+=x.value.type.score,b(),clearInterval(m),m=setInterval(L,M())):y.value.pop(),E()}function b(){let e;do{e={x:Math.floor(Math.random()*t),y:Math.floor(Math.random()*a),type:g[Math.floor(Math.random()*g.length)]}}while(y.value.some((t=>t.x===e.x&&t.y===e.y)));x.value=e}function I(e){"ArrowUp"===e.key&&"down"!==w.value?w.value="up":"ArrowDown"===e.key&&"up"!==w.value?w.value="down":"ArrowLeft"===e.key&&"right"!==w.value?w.value="left":"ArrowRight"===e.key&&"left"!==w.value&&(w.value="right")}let K=0,_=0;function C(e){1===e.touches.length&&(K=e.touches[0].clientX,_=e.touches[0].clientY)}function A(e){if(1===e.changedTouches.length){const t=e.changedTouches[0].clientX-K,a=e.changedTouches[0].clientY-_;Math.abs(t)>Math.abs(a)?t>20&&"left"!==w.value?w.value="right":t<-20&&"right"!==w.value&&(w.value="left"):a>20&&"up"!==w.value?w.value="down":a<-20&&"down"!==w.value&&(w.value="up")}}function S(){y.value=[{x:5,y:5}],w.value="right",k.value=0,p.value=!1,b(),E(),clearInterval(m),m=setInterval(L,M())}return(0,l.sV)((()=>{R(),E(),window.addEventListener("resize",R),window.addEventListener("keydown",I),f.value.addEventListener("touchstart",C,{passive:!1}),f.value.addEventListener("touchend",A,{passive:!1}),m=setInterval(L,M())})),(0,l.hi)((()=>{window.removeEventListener("resize",R),window.removeEventListener("keydown",I),f.value&&(f.value.removeEventListener("touchstart",C),f.value.removeEventListener("touchend",A)),clearInterval(m)})),(e,t)=>((0,l.uX)(),(0,l.CE)("div",v,[(0,l.Lk)("canvas",{ref_key:"canvas",ref:f,width:h.value,height:d.value,style:(0,n.Tr)(e.canvasStyle)},null,12,o),p.value?((0,l.uX)(),(0,l.CE)("div",r,[(0,l.eW)(" 游戏结束！分数："+(0,n.v_)(k.value)+" ",1),(0,l.Lk)("button",{onClick:S},"重新开始")])):(0,l.Q3)("",!0)]))}},d=a(6262);const f=(0,d.A)(h,[["__scopeId","data-v-a9664f76"]]);var y=f}}]);
//# sourceMappingURL=482.c39c834b.js.map