{"version":3,"file":"js/482.c39c834b.js","mappings":"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","sources":["webpack://vue-beginner/./src/views/Snake.vue","webpack://vue-beginner/./src/views/Snake.vue?551f"],"sourcesContent":["<template>\r\n  <div class=\"snake-game\">\r\n    <canvas ref=\"canvas\" :width=\"canvasWidth\" :height=\"canvasHeight\" :style=\"canvasStyle\" />\r\n    <div v-if=\"gameOver\" class=\"game-over\">\r\n      游戏结束！分数：{{ score }}\r\n      <button @click=\"restart\">重新开始</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted, onUnmounted, computed } from 'vue';\r\n\r\n// 响应式 canvas 尺寸\r\nconst cellSize = 20;\r\nconst cols = 400 / cellSize;\r\nconst rows = 400 / cellSize;\r\nconst minCanvasSize = 200;\r\nconst maxCanvasSize = 400;\r\n\r\nconst canvasWidth = ref(maxCanvasSize);\r\nconst canvasHeight = ref(maxCanvasSize);\r\n\r\nconst canvas = ref(null);\r\nconst snake = ref([\r\n  { x: 5, y: 5 },\r\n]);\r\nconst direction = ref('right');\r\nconst foodTypes = [\r\n  { score: 1, color: 'red' },\r\n  { score: 3, color: 'gold' },\r\n  { score: 5, color: 'blue' },\r\n];\r\nconst food = ref({ x: 10, y: 10, type: foodTypes[0] });\r\nconst gameOver = ref(false);\r\nconst score = ref(0);\r\nlet timer = null;\r\n\r\nfunction getInterval() {\r\n  // 基础速度120ms，分数每增加10，速度提升10ms，最低40ms\r\n  return Math.max(40, 120 - Math.floor(score.value / 10) * 10);\r\n}\r\n\r\nfunction updateCanvasSize() {\r\n  // 以屏幕宽度为准，最大400px，最小200px\r\n  const size = Math.max(minCanvasSize, Math.min(window.innerWidth, maxCanvasSize));\r\n  canvasWidth.value = size;\r\n  canvasHeight.value = size;\r\n}\r\n\r\nfunction draw() {\r\n  const ctx = canvas.value.getContext('2d');\r\n  ctx.clearRect(0, 0, canvasWidth.value, canvasHeight.value);\r\n  const scaleX = canvasWidth.value / cols;\r\n  const scaleY = canvasHeight.value / rows;\r\n  // 画蛇\r\n  ctx.fillStyle = 'green';\r\n  snake.value.forEach(seg => {\r\n    ctx.fillRect(seg.x * scaleX, seg.y * scaleY, scaleX, scaleY);\r\n  });\r\n  // 画食物\r\n  ctx.fillStyle = food.value.type.color;\r\n  ctx.fillRect(food.value.x * scaleX, food.value.y * scaleY, scaleX, scaleY);\r\n}\r\n\r\nfunction move() {\r\n  if (gameOver.value) return;\r\n  const head = { ...snake.value[0] };\r\n  if (direction.value === 'right') head.x++;\r\n  else if (direction.value === 'left') head.x--;\r\n  else if (direction.value === 'up') head.y--;\r\n  else if (direction.value === 'down') head.y++;\r\n\r\n  // 穿墙处理\r\n  if (head.x < 0) head.x = cols - 1;\r\n  if (head.x >= cols) head.x = 0;\r\n  if (head.y < 0) head.y = rows - 1;\r\n  if (head.y >= rows) head.y = 0;\r\n\r\n  // 撞自己\r\n  if (snake.value.some(seg => seg.x === head.x && seg.y === head.y)) {\r\n    gameOver.value = true;\r\n    clearInterval(timer);\r\n    return;\r\n  }\r\n\r\n  snake.value.unshift(head);\r\n  // 吃到食物\r\n  if (head.x === food.value.x && head.y === food.value.y) {\r\n    score.value += food.value.type.score;\r\n    placeFood();\r\n    // 分数变化后，重设速度\r\n    clearInterval(timer);\r\n    timer = setInterval(move, getInterval());\r\n  } else {\r\n    snake.value.pop();\r\n  }\r\n  draw();\r\n}\r\n\r\nfunction placeFood() {\r\n  let newFood;\r\n  do {\r\n    newFood = {\r\n      x: Math.floor(Math.random() * cols),\r\n      y: Math.floor(Math.random() * rows),\r\n      type: foodTypes[Math.floor(Math.random() * foodTypes.length)]\r\n    };\r\n  } while (snake.value.some(seg => seg.x === newFood.x && seg.y === newFood.y));\r\n  food.value = newFood;\r\n}\r\n\r\nfunction keydown(e) {\r\n  if (e.key === 'ArrowUp' && direction.value !== 'down') direction.value = 'up';\r\n  else if (e.key === 'ArrowDown' && direction.value !== 'up') direction.value = 'down';\r\n  else if (e.key === 'ArrowLeft' && direction.value !== 'right') direction.value = 'left';\r\n  else if (e.key === 'ArrowRight' && direction.value !== 'left') direction.value = 'right';\r\n}\r\n\r\n// 触摸滑动支持\r\nlet touchStartX = 0;\r\nlet touchStartY = 0;\r\nfunction handleTouchStart(e) {\r\n  if (e.touches.length === 1) {\r\n    touchStartX = e.touches[0].clientX;\r\n    touchStartY = e.touches[0].clientY;\r\n  }\r\n}\r\nfunction handleTouchEnd(e) {\r\n  if (e.changedTouches.length === 1) {\r\n    const dx = e.changedTouches[0].clientX - touchStartX;\r\n    const dy = e.changedTouches[0].clientY - touchStartY;\r\n    if (Math.abs(dx) > Math.abs(dy)) {\r\n      if (dx > 20 && direction.value !== 'left') direction.value = 'right';\r\n      else if (dx < -20 && direction.value !== 'right') direction.value = 'left';\r\n    } else {\r\n      if (dy > 20 && direction.value !== 'up') direction.value = 'down';\r\n      else if (dy < -20 && direction.value !== 'down') direction.value = 'up';\r\n    }\r\n  }\r\n}\r\n\r\nfunction restart() {\r\n  snake.value = [{ x: 5, y: 5 }];\r\n  direction.value = 'right';\r\n  score.value = 0;\r\n  gameOver.value = false;\r\n  placeFood();\r\n  draw();\r\n  clearInterval(timer);\r\n  timer = setInterval(move, getInterval());\r\n}\r\n\r\nonMounted(() => {\r\n  updateCanvasSize();\r\n  draw();\r\n  window.addEventListener('resize', updateCanvasSize);\r\n  window.addEventListener('keydown', keydown);\r\n  // 触摸事件\r\n  canvas.value.addEventListener('touchstart', handleTouchStart, { passive: false });\r\n  canvas.value.addEventListener('touchend', handleTouchEnd, { passive: false });\r\n  timer = setInterval(move, getInterval());\r\n});\r\n\r\nonUnmounted(() => {\r\n  window.removeEventListener('resize', updateCanvasSize);\r\n  window.removeEventListener('keydown', keydown);\r\n  if (canvas.value) {\r\n    canvas.value.removeEventListener('touchstart', handleTouchStart);\r\n    canvas.value.removeEventListener('touchend', handleTouchEnd);\r\n  }\r\n  clearInterval(timer);\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.snake-game {\r\n  position: relative;\r\n  width: 100vw;\r\n  max-width: 400px;\r\n  min-width: 200px;\r\n  margin: 0 auto;\r\n  padding-top: 8vw;\r\n  box-sizing: border-box;\r\n}\r\ncanvas {\r\n  border: 1.5px solid #333;\r\n  background: #fafafa;\r\n  width: 100%;\r\n  height: auto;\r\n  display: block;\r\n  touch-action: none;\r\n  border-radius: 1.2rem;\r\n}\r\n.game-over {\r\n  position: absolute;\r\n  top: 40%;\r\n  left: 0;\r\n  width: 100%;\r\n  text-align: center;\r\n  background: rgba(255,255,255,0.85);\r\n  font-size: 1.3rem;\r\n  padding: 1.5rem 0.5rem;\r\n  border-radius: 1rem;\r\n}\r\nbutton {\r\n  font-size: 1.1rem;\r\n  padding: 0.8rem 1.5rem;\r\n  margin-top: 1.2rem;\r\n  border-radius: 0.7rem;\r\n  border: none;\r\n  background: #4caf50;\r\n  color: #fff;\r\n  box-shadow: 0 2px 8px rgba(0,0,0,0.12);\r\n}\r\n@media (max-width: 500px) {\r\n  .snake-game {\r\n    padding-top: 2vw;\r\n  }\r\n  .game-over {\r\n    font-size: 1.1rem;\r\n    padding: 1rem 0.2rem;\r\n  }\r\n  button {\r\n    font-size: 1rem;\r\n    padding: 0.7rem 1.1rem;\r\n  }\r\n}\r\n</style>\r\n","import script from \"./Snake.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Snake.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Snake.vue?vue&type=style&index=0&id=a9664f76&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-a9664f76\"]])\n\nexport default __exports__"],"names":["cellSize","minCanvasSize","maxCanvasSize","cols","rows","canvasWidth","canvasHeight","canvas","snake","x","y","direction","foodTypes","score","color","food","type","gameOver","timer","getInterval","Math","max","floor","value","updateCanvasSize","size","min","window","innerWidth","draw","ctx","getContext","clearRect","scaleX","scaleY","fillStyle","forEach","seg","fillRect","move","head","some","clearInterval","unshift","placeFood","setInterval","pop","newFood","random","length","keydown","e","key","touchStartX","touchStartY","handleTouchStart","touches","clientX","clientY","handleTouchEnd","changedTouches","dx","dy","abs","restart","addEventListener","passive","removeEventListener","__exports__"],"sourceRoot":""}