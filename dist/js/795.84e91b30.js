"use strict";(self["webpackChunkvue_beginner"]=self["webpackChunkvue_beginner"]||[]).push([[795],{5795:function(e,t,a){a.r(t),a.d(t,{default:function(){return s}});var n=function(){var e=this,t=e._self._c,a=e._self._setupProxy;return t("div",{staticClass:"snake-game"},[t("canvas",{ref:"canvas",style:a.canvasStyle,attrs:{width:a.canvasWidth,height:a.canvasHeight}}),a.gameOver?t("div",{staticClass:"game-over"},[e._v(" 游戏结束！分数："+e._s(a.score)+" "),t("button",{on:{click:a.restart}},[e._v("重新开始")])]):e._e()])},l=[],u=a(5471),v={__name:"Snake",setup(e){const t=400,a=20,n=t/a,l=t/a,v=(0,u.ref)(null),o=(0,u.ref)([{x:5,y:5}]),r=(0,u.ref)("right"),i=(0,u.ref)({x:10,y:10}),s=(0,u.ref)(!1),c=(0,u.ref)(0);let h=null;const d=(0,u.ref)(t),f=(0,u.ref)(t),w=(0,u.computed)((()=>({width:"100%",height:"auto",maxWidth:"100vw",maxHeight:"100vw",display:"block",touchAction:"none"})));function y(){const e=Math.min(window.innerWidth,400);d.value=e,f.value=e}function g(){const e=v.value.getContext("2d");e.clearRect(0,0,d.value,f.value);const t=d.value/n,a=f.value/l;e.fillStyle="green",o.value.forEach((n=>{e.fillRect(n.x*t,n.y*a,t,a)})),e.fillStyle="red",e.fillRect(i.value.x*t,i.value.y*a,t,a)}function x(){if(s.value)return;const e={...o.value[0]};if("right"===r.value?e.x++:"left"===r.value?e.x--:"up"===r.value?e.y--:"down"===r.value&&e.y++,e.x<0||e.x>=n||e.y<0||e.y>=l||o.value.some((t=>t.x===e.x&&t.y===e.y)))return s.value=!0,void clearInterval(h);o.value.unshift(e),e.x===i.value.x&&e.y===i.value.y?(c.value++,m()):o.value.pop(),g()}function m(){let e;do{e={x:Math.floor(Math.random()*n),y:Math.floor(Math.random()*l)}}while(o.value.some((t=>t.x===e.x&&t.y===e.y)));i.value=e}function p(e){"ArrowUp"===e.key&&"down"!==r.value?r.value="up":"ArrowDown"===e.key&&"up"!==r.value?r.value="down":"ArrowLeft"===e.key&&"right"!==r.value?r.value="left":"ArrowRight"===e.key&&"left"!==r.value&&(r.value="right")}let k=0,_=0;function S(e){1===e.touches.length&&(k=e.touches[0].clientX,_=e.touches[0].clientY)}function b(e){if(1===e.changedTouches.length){const t=e.changedTouches[0].clientX-k,a=e.changedTouches[0].clientY-_;Math.abs(t)>Math.abs(a)?t>20&&"left"!==r.value?r.value="right":t<-20&&"right"!==r.value&&(r.value="left"):a>20&&"up"!==r.value?r.value="down":a<-20&&"down"!==r.value&&(r.value="up")}}function E(){o.value=[{x:5,y:5}],r.value="right",c.value=0,s.value=!1,m(),g(),h=setInterval(x,120)}return(0,u.onMounted)((()=>{y(),g(),window.addEventListener("resize",y),window.addEventListener("keydown",p),v.value.addEventListener("touchstart",S,{passive:!1}),v.value.addEventListener("touchend",b,{passive:!1}),h=setInterval(x,120)})),(0,u.onUnmounted)((()=>{window.removeEventListener("resize",y),window.removeEventListener("keydown",p),v.value&&(v.value.removeEventListener("touchstart",S),v.value.removeEventListener("touchend",b)),clearInterval(h)})),{__sfc:!0,baseSize:t,cellSize:a,cols:n,rows:l,canvas:v,snake:o,direction:r,food:i,gameOver:s,score:c,timer:h,canvasWidth:d,canvasHeight:f,canvasStyle:w,updateCanvasSize:y,draw:g,move:x,placeFood:m,keydown:p,touchStartX:k,touchStartY:_,handleTouchStart:S,handleTouchEnd:b,restart:E}}},o=v,r=a(1656),i=(0,r.A)(o,n,l,!1,null,"5e19871b",null),s=i.exports}}]);
//# sourceMappingURL=795.84e91b30.js.map